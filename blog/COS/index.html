<!doctype html>
<html lang="zh" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">存储卡文件自动迁移方案 | iofomo | Open-source organization</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.iofomo.com/blog/COS"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="存储卡文件自动迁移方案 | iofomo | Open-source organization"><meta data-rh="true" name="description" content="基于TF卡存储芯片和ExFAT文件系统，从固件底层的磁盘读写指令实现上层无感数据迁移。"><meta data-rh="true" property="og:description" content="基于TF卡存储芯片和ExFAT文件系统，从固件底层的磁盘读写指令实现上层无感数据迁移。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-09-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/iofomo"><meta data-rh="true" property="article:tag" content="COS,TF-Card"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.iofomo.com/blog/COS"><link data-rh="true" rel="alternate" href="https://www.iofomo.com/blog/COS" hreflang="zh"><link data-rh="true" rel="alternate" href="https://www.iofomo.com/blog/COS" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="iofomo | Open-source organization RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="iofomo | Open-source organization Atom Feed"><link rel="stylesheet" href="/assets/css/styles.510b357b.css">
<script src="/assets/js/runtime~main.35643c6b.js" defer="defer"></script>
<script src="/assets/js/main.e2c25420.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><header class="sticky top-0 z-10"><div class="absolute top-0 left-0 right-0 backdrop-blur-[6px] landing-md:backdrop-blur-[12px] z-[-1] bg-gray-0 dark:bg-gray-900 bg-opacity-80 dark:bg-opacity-80 pointer-events-none transition-colors duration-150 ease-in-out" style="top:-10px;bottom:-60px;-webkit-mask-image:linear-gradient(to bottom, transparent 0, transparent calc(0% + 10px), black calc(0% + 10px), black calc(100% - 60px), transparent calc(100% - 60px));mask-image:linear-gradient(to bottom, transparent 0, transparent calc(0% + 10px), black calc(0% + 10px), black calc(100% - 60px), transparent calc(100% - 60px))"></div><div class="relative z-[1] p-4 landing-sm:px-8 landing-md:py-5"><div class="mx-auto flex items-center justify-between max-w-[896px] landing-lg:max-w-[1200px]"><div class="w-[70px] landing-lg:w-[70px]"><a href="/"><img src="/img/logo-dark.png" class="text-gray-900 dark:text-gray-0"></a></div><div style="width:40px;height:100%"></div><div class="hidden landing-md:flex flex-1 items-center gap-8"><div id="popover-桌面端" class="relative inline-flex items-center" data-headlessui-state=""><button class="inline-flex items-center text-sm leading-6 font-normal" type="button" aria-expanded="false" data-headlessui-state=""><span class="text-gray-900 dark:text-gray-300 transition-colors duration-150 ease-in-out inline-block">桌面端</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="transition duration-150 ease-out -mr-2 text-gray-500 dark:text-gray-400"><path fill="currentColor" fill-rule="evenodd" d="M15.707 9.793a1 1 0 0 0-1.414 0L12 12.086 9.707 9.793a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0 0-1.414Z" clip-rule="evenodd"></path></svg></button></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><div id="popover-移动端" class="relative inline-flex items-center" data-headlessui-state=""><button class="inline-flex items-center text-sm leading-6 font-normal" type="button" aria-expanded="false" data-headlessui-state=""><span class="text-gray-900 dark:text-gray-300 transition-colors duration-150 ease-in-out inline-block">移动端</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="transition duration-150 ease-out -mr-2 text-gray-500 dark:text-gray-400"><path fill="currentColor" fill-rule="evenodd" d="M15.707 9.793a1 1 0 0 0-1.414 0L12 12.086 9.707 9.793a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0 0-1.414Z" clip-rule="evenodd"></path></svg></button></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><div id="popover-服务" class="relative inline-flex items-center" data-headlessui-state=""><button class="inline-flex items-center text-sm leading-6 font-normal" type="button" aria-expanded="false" data-headlessui-state=""><span class="text-gray-900 dark:text-gray-300 transition-colors duration-150 ease-in-out inline-block">服务</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="transition duration-150 ease-out -mr-2 text-gray-500 dark:text-gray-400"><path fill="currentColor" fill-rule="evenodd" d="M15.707 9.793a1 1 0 0 0-1.414 0L12 12.086 9.707 9.793a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0 0-1.414Z" clip-rule="evenodd"></path></svg></button></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><a class="inline-flex items-center gap-2 text-sm leading-6 font-normal text-gray-900 dark:text-gray-300 transition-colors duration-150 ease-in-out no-underline hover:text-gray-900 dark:hover:text-white" href="/blog">博客</a></div><div class="hidden landing-md:flex items-center justify-end gap-4 w-[130px] landing-lg:w-[200px]"><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div><div class="separator" aria-hidden="true"></div><a href="https://github.com/iofomo/fomosite" target="_blank" rel="noreferrer" class="flex gap-2 items-center font-normal text-sm leading-6 text-gray-500 dark:text-gray-400 hover:text-gray-400 dark:hover:text-gray-300 hover:no-underline transition-colors duration-200 ease-in-out"><svg width="16" height="16" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.053 0A10.904 10.904 0 0 0 3.89 2.685 11.34 11.34 0 0 0 .142 9.472a11.48 11.48 0 0 0 1.456 7.65 11.087 11.087 0 0 0 5.964 4.86c.556.103.752-.25.752-.547v-1.918C5.23 20.202 4.58 18 4.58 18a3.012 3.012 0 0 0-1.227-1.655c-.997-.692.081-.692.081-.692.35.05.683.18.975.382.293.202.536.469.713.78.15.278.352.523.595.721a2.312 2.312 0 0 0 2.618.221c.042-.57.283-1.105.678-1.509-2.454-.284-5.03-1.253-5.03-5.539a4.415 4.415 0 0 1 1.132-3.025A4.194 4.194 0 0 1 5.224 4.7s.928-.305 3.036 1.156c1.81-.508 3.72-.508 5.531 0 2.108-1.46 3.03-1.156 3.03-1.156.406.936.455 1.993.135 2.963a4.415 4.415 0 0 1 1.132 3.026c0 4.334-2.582 5.282-5.043 5.538.264.271.468.597.598.955.13.358.182.741.155 1.122V21.4c0 .367.196.65.759.54a11.093 11.093 0 0 0 5.88-4.878 11.481 11.481 0 0 0 1.419-7.6 11.34 11.34 0 0 0-3.71-6.746A10.907 10.907 0 0 0 11.053 0Z" fill="currentColor"></path></svg></a><a href="https://gitee.com/iofomo/fomosite" target="_blank" rel="noreferrer" class="flex gap-2 items-center font-normal text-sm leading-6 text-gray-500 dark:text-gray-400 hover:text-gray-400 dark:hover:text-gray-300 hover:no-underline transition-colors duration-200 ease-in-out"><svg width="16" height="16" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6"><path fill-rule="evenodd" clip-rule="evenodd" d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="currentColor" p-id="8186"></path></svg></a><button type="button" class="appearance-none focus:outline-none relative w-10 h-10 rounded-full border border-solid border-gray-300 dark:border-gray-700 text-gray-500 transition-colors duration-150 ease-in-out overflow-hidden flex-shrink-0 group"><div class="absolute w-full h-full flex items-center justify-center flex-shrink-0 top-10 translate-y-0 dark:-translate-y-10 duration-200 ease-in-out transition-transform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill="currentColor" d="M8 5.818c1.2 0 2.182.982 2.182 2.182S9.2 10.182 8 10.182 5.818 9.2 5.818 8 6.8 5.818 8 5.818Zm0-1.454A3.638 3.638 0 0 0 4.364 8 3.638 3.638 0 0 0 8 11.636 3.638 3.638 0 0 0 11.636 8 3.638 3.638 0 0 0 8 4.364ZM.727 8.727h1.455A.73.73 0 0 0 2.909 8a.73.73 0 0 0-.727-.727H.727A.73.73 0 0 0 0 8c0 .4.327.727.727.727Zm13.091 0h1.455A.73.73 0 0 0 16 8a.73.73 0 0 0-.727-.727h-1.455a.73.73 0 0 0-.727.727c0 .4.327.727.727.727Zm-6.545-8v1.455c0 .4.327.727.727.727a.73.73 0 0 0 .727-.727V.727A.73.73 0 0 0 8 0a.73.73 0 0 0-.727.727Zm0 13.091v1.455c0 .4.327.727.727.727a.73.73 0 0 0 .727-.727v-1.455A.73.73 0 0 0 8 13.091a.73.73 0 0 0-.727.727ZM3.629 2.604a.724.724 0 1 0-1.025 1.025l.77.771A.724.724 0 1 0 4.4 3.375l-.77-.771Zm8.997 8.996a.724.724 0 1 0-1.026 1.026l.77.77a.724.724 0 1 0 1.025-1.025l-.77-.771Zm.77-7.97a.724.724 0 1 0-1.025-1.025l-.771.77A.724.724 0 1 0 12.626 4.4l.77-.77ZM4.4 12.624A.724.724 0 1 0 3.375 11.6l-.771.772a.724.724 0 1 0 1.025 1.025l.771-.77Z"></path></svg></div><div class="absolute w-full h-full flex items-center justify-center flex-shrink-0 top-10 -translate-y-10 dark:translate-y-0 duration-200 ease-in-out transition-transform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M6.563 1.66a6.5 6.5 0 1 0 7.778 7.777A5.5 5.5 0 0 1 6.563 1.66ZM0 8A8 8 0 0 1 9.526.146a.75.75 0 0 1 .033 1.465A4.002 4.002 0 0 0 10.5 9.5a4.002 4.002 0 0 0 3.889-3.06.75.75 0 0 1 1.466.034A8 8 0 1 1 0 8Z" clip-rule="evenodd"></path></svg></div></button></div></div></div></header><div class="flex justify-center mx-auto max-w-screen-blog-max w-full"><div class="refine-prose flex-1 min-w-0 xl:px-8"><article class="py-10 px-4 sm:px-0 blog-sm:py-12 blog-md:py-16 w-full mx-auto max-w-[512px] blog-sm:max-w-screen-blog-sm blog-lg:max-w-screen-content-2xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="基于TF卡存储芯片和ExFAT文件系统，从固件底层的磁盘读写指令实现上层无感数据迁移。"><div class="flex justify-between items-center blog-sm:px-6"><a class="!text-gray-500 text-sm no-underline" href="/blog">← Back to blog</a></div><div class="blog-sm:px-6"><div class="mb-6 text-sm"><div class="flex justify-between sm:flex-row flex-col"><div class="flex justify-center items-center gap-2"></div><div class="flex items-center gap-2 text-gray-600 dark:text-gray-400"><time datetime="2023-09-01T00:00:00.000Z" itemprop="datePublished">2023年9月1日</time><span class="w-[4px] h-[4px] rounded-full bg-gray-600 dark:bg-gray-500"></span>阅读需 24 分钟</div></div></div><h1 class="text-xl md:text-4xl" itemprop="headline">存储卡文件自动迁移方案</h1><div id="__blog-post-container" class="markdown" itemprop="articleBody"><blockquote>
<p>基于TF卡存储芯片和ExFAT文件系统，从固件底层的磁盘读写指令实现上层无感数据迁移。</p>
</blockquote>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="说明">说明<a href="#说明" class="hash-link" aria-label="说明的直接链接" title="说明的直接链接">​</a></h3>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="关键词">关键词<a href="#关键词" class="hash-link" aria-label="关键词的直接链接" title="关键词的直接链接">​</a></h5>
<p><code>COS：</code>即<code>Chip Operating System</code>，这里特指安全芯片内操作系统。</p>
<p><code>TF卡：</code>即外置存储卡，这里特指安全存储卡。</p>
<p><code>明区：</code>即TF卡的普通存储区域，普通数据区。</p>
<p><code>密区：</code>即TF卡的加密存储区域，安全数据区。</p>
<p><code>ExFAT：</code>即<code>Extended File Allocation Table File System</code>，扩展<code>FAT</code>，即扩展文件分配表；是<code>Microsoft</code>在<code>Windows</code>的<code>Embeded 5.0</code>以上中引入的一种适合于闪存的文件系统，为了解决<code>FAT32</code>等不支持<code>4G</code>及其更大的文件而推出。对于闪存，<code>NTFS</code>文件系统不适合使用，<code>ExFAT</code>更为适用。这里作为本方案的上层<code>TF卡</code>文件系统。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="背景">背景<a href="#背景" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h3>
<p>当前场景对于安全<code>TF卡</code>核心需求为：</p>
<ol>
<li>简单易用，操作简单无需学习，开箱即用；现有方案安全数据的均需安全工具软件才能访问，不能满足多平台，体验参差不齐。</li>
<li>环境无痕，整个操作在系统中不留痕迹，无需安装软件或运行插件；当前安全数据访问需要安装或运行特定的软件或插件。</li>
</ol>
<p>在原安全<code>TF卡</code>技术方案上解决以上需求，即是本方案的目标。</p>
<p>关于简单易用性，操作系统提供了最为简单友好的文件管理软件，因此本方案的关键点就是直接利用操作系统的文件管理软件，无需进行软件或插件的开发，即可达到数据安全存储的目的。</p>
<p><img loading="lazy" src="/assets/images/1-0edd731d6fa970a796ee104e37fb664d.png" width="1318" height="664" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="技术方案">技术方案<a href="#技术方案" class="hash-link" aria-label="技术方案的直接链接" title="技术方案的直接链接">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="设计">设计<a href="#设计" class="hash-link" aria-label="设计的直接链接" title="设计的直接链接">​</a></h4>
<p><img loading="lazy" src="/assets/images/2-a7ceda540cd95023ac26f3252e236996.png" width="599" height="588" class="img_ev3q"></p>
<p><code>说明：</code></p>
<ul>
<li>本方案解决了数据存储直接无需安装或运行软件或插件的问题。</li>
<li>在保存数据场景中直接使用操作系统的文件管理进行操作，简单易用，无痕。</li>
<li>在此场景下无需开发额外工具，只要操作系统文件管理可以访问标准的TF卡，即支持此安全功能。</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="硬件">硬件<a href="#硬件" class="hash-link" aria-label="硬件的直接链接" title="硬件的直接链接">​</a></h4>
<p>为了能够达到安全存储控制的目的，在传统的<code>TF卡</code>上增加安全芯片，其为<code>ARM</code>平台采用<code>SD指令</code>直接和<code>TF卡</code>进行通信，<code>TF卡</code>的数据加解密速度可达<code>25MB/S</code>以上。安全<code>TF卡</code>方案主要由：<code>SD</code>接口处理层、<code>Nandflash</code>管理层、<code>COS</code>、驱动四部分组成。其中<code>COS</code>主要包含：命令解析、数据识别、访问控制（授权认证）、加解密几个模块。</p>
<p><img loading="lazy" src="/assets/images/3-fde90fff2c5fab29b29aff5b43d7b1d4.png" width="1312" height="846" class="img_ev3q"></p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据流">数据流<a href="#数据流" class="hash-link" aria-label="数据流的直接链接" title="数据流的直接链接">​</a></h4>
<p>当前主流方案为①至②的解决方案，密区的数据只能通过特定的接口进行访问。为了能够让密区的写命令也能借用普通命令通道，因此需要对写命令进行解析，并对目标数据进行重定向至密区。即方案升级为：②至③。</p>
<p><img loading="lazy" src="/assets/images/4-1c68a7b4f94e2a7fdc8a6899e94d6ee1.png" width="1349" height="361" class="img_ev3q"></p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据存储">数据存储<a href="#数据存储" class="hash-link" aria-label="数据存储的直接链接" title="数据存储的直接链接">​</a></h4>
<p>安全TF卡整个存储空间分布如下图所示：</p>
<p><img loading="lazy" src="/assets/images/5-f0ef005d9e767961a58b8476e02c995e.png" width="867" height="134" class="img_ev3q"></p>
<p>1）<code>MBR</code>，即<code>Master Boot Record</code>。存储分区格式通常为<code>MBR</code>分区和<code>GPT</code>（GUID Partition Table）分区两种格式。<code>MBR</code>磁盘分区支持最大卷为2 TB（Terabytes）并且每个磁盘最多有4个主分区（或3个主分区，1个扩展分区和无限制的逻辑驱动器），这里安全<code>TF卡</code>采用<code>MBR</code>分区格式。</p>
<p><img loading="lazy" src="/assets/images/6-5a4bb8697c56b258327393e1f755963a.png" width="597" height="513" class="img_ev3q"></p>
<p>2）<code>FAT</code>表，本方案只有一个，<code>FAT2</code>只有定义<code>TFAT</code>才存在，本方案不涉及。</p>
<p>3）簇位图，是<code>ExFAT</code>文件系统中的第一个元文件，类似于<code>NTFS</code>文件系统中的元文件<code>$BitMap</code>，它的作用是用来管理分区中簇的使用情况。簇位图文件中的每一个位，映射到数据区中的每一个簇。 如果某个簇分配给了文件，该簇在簇位图文件中对应的位就会被填入<code>“1”</code>，表示该簇已经占用；如果没有使用的空簇，它们在簇位图文件中对应的位就是<code>“0”</code>。</p>
<p>4）大写字符，是<code>ExFAT</code>文件系统中的第二个元文件，类似于<code>NTFS</code>文件系统中的元文件<code>$UpCase</code>。<code>Unicode</code>字母表中的每一个字符在这个文件中都有对应的条目，用于比较、排序、计算<code>Hash</code>值。</p>
<p>5）用户数据，即<code>ExFAT</code>文件系统根目录数据，具有如下特征：</p>
<ul>
<li>分区中的每个文件及文件夹（也称为目录）都被分配多个大小为<code>32</code>字节的目录项，用以描述文件及文件夹的属性、大小、起始簇号和时间、日期等信息，当然还会把文件名或目录名也记录在目录项中。</li>
<li>目录也被视为特殊类型的文件，所以每个目录也与文件一样有目录项。</li>
<li>分区根目录下的文件及文件夹的目录项存放在根目录区中，分区子目录下的文件及文件夹的目录项存放在数据区相应的簇中。</li>
<li>文件系统目录项的第一个字节用来描述目录项的类型，剩下的<code>31</code>个字节用来记录文件的相关信息。</li>
</ul>
<p>6）隐藏区，属于加密区中的一部分，用于保存加密区数据的全局配置，如设备ID、认证ID、跟密钥也业务配置数据等。</p>
<p>7）密区用户数据，该数据按照自定义格式存储文件数据，格式为文件头和文件数据内容两部分。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="解析和识别">解析和识别<a href="#解析和识别" class="hash-link" aria-label="解析和识别的直接链接" title="解析和识别的直接链接">​</a></h4>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sd命令接口扩展">SD命令接口扩展<a href="#sd命令接口扩展" class="hash-link" aria-label="SD命令接口扩展的直接链接" title="SD命令接口扩展的直接链接">​</a></h5>
<p>拦截SD接口标准数据写命令，并且可以扩展修改数据存储的扇区和数据内容，如接口定义如下：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief: 当用户在明区保存文件数据，ExFAT文件系统处理完成，落地明区磁盘之前的回调</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param lba 数据起始扇区号（可重定向）</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param buf 数据缓存地址，该数据修改后则会影响到实际落地的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param blockNum 数据扇区数</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      0: 成功, 否则操作失败，中断返回</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">uint8_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tf_handleDataWrite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint32_t</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> lba</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint8_t</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> blockNum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exfat文件系统头识别">ExFAT文件系统头识别<a href="#exfat文件系统头识别" class="hash-link" aria-label="ExFAT文件系统头识别的直接链接" title="ExFAT文件系统头识别的直接链接">​</a></h5>
<p>由于回调接口为底层磁盘扇区写操作接口，因此需要对传递过来  的参数进行精准快速识别。需要在<code>COS</code>启动时对文件系统配置进行解析（如：簇大小，文件系统根目录偏移等）。因此首先需要了解<code>Main Boot Region</code> 主引导区<code>Boot Sector</code>（引导扇区）的数据结构。</p>
<table><thead><tr><th style="text-align:left">偏移量</th><th style="text-align:left">大小</th><th style="text-align:left">描述</th><th style="text-align:left">内容</th></tr></thead><tbody><tr><td style="text-align:left">0x00</td><td style="text-align:left">3</td><td style="text-align:left">跳转指令</td><td style="text-align:left">EB 76 90</td></tr><tr><td style="text-align:left">0x03</td><td style="text-align:left">8</td><td style="text-align:left">文件系统名称</td><td style="text-align:left">&quot;EXFAT  &quot;</td></tr><tr><td style="text-align:left">0x0B</td><td style="text-align:left">53</td><td style="text-align:left">保留区</td><td style="text-align:left">全为0</td></tr><tr><td style="text-align:left">0x40</td><td style="text-align:left">8</td><td style="text-align:left">隐藏扇区数</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">0x48</td><td style="text-align:left">8</td><td style="text-align:left">分区总扇区数</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">0x50</td><td style="text-align:left">4</td><td style="text-align:left">FAT表起始扇区号</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">0x54</td><td style="text-align:left">4</td><td style="text-align:left">FAT表扇区数</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">0x58</td><td style="text-align:left">4</td><td style="text-align:left">首簇起始扇区号</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">0x5C</td><td style="text-align:left">4</td><td style="text-align:left">分区内的总簇数</td><td style="text-align:left">最大值为2^32-11</td></tr><tr><td style="text-align:left">0x60</td><td style="text-align:left">4</td><td style="text-align:left">根目录首簇号</td><td style="text-align:left">0x04只占1个簇</td></tr><tr><td style="text-align:left">0x64</td><td style="text-align:left">4</td><td style="text-align:left">卷序列号</td><td style="text-align:left">4个字节的随机数</td></tr><tr><td style="text-align:left">0x68</td><td style="text-align:left">2</td><td style="text-align:left">卷版本号</td><td style="text-align:left">固定为“00 01”</td></tr><tr><td style="text-align:left">0x6A</td><td style="text-align:left">2</td><td style="text-align:left">卷状态</td><td style="text-align:left">固定为“00 00”</td></tr><tr><td style="text-align:left">0x6C</td><td style="text-align:left">1</td><td style="text-align:left">每扇区字节数</td><td style="text-align:left">2^N(最小值为9à 2^9=512字节/扇区最大值为12à 2^12=4096字节/扇区)</td></tr><tr><td style="text-align:left">0x6D</td><td style="text-align:left">1</td><td style="text-align:left">每簇扇区数</td><td style="text-align:left">2^N(最小值为0à 2^0=1扇区/簇最大值为25à 2^16=65536扇区/簇 = 32 MB)</td></tr><tr><td style="text-align:left">0x6E</td><td style="text-align:left">1</td><td style="text-align:left">FAT表个数</td><td style="text-align:left">该值为1，只有对TExFAT才为2</td></tr><tr><td style="text-align:left">0x6F</td><td style="text-align:left">1</td><td style="text-align:left">驱动标记</td><td style="text-align:left">这个是提供给INT13中断使用的，通常为80H</td></tr><tr><td style="text-align:left">0x70</td><td style="text-align:left">1</td><td style="text-align:left">分区使用百分比</td><td style="text-align:left">0~100。百分之多少的簇已被分配。该值可不准确</td></tr><tr><td style="text-align:left">0x71</td><td style="text-align:left">7</td><td style="text-align:left">保留</td><td style="text-align:left">00</td></tr><tr><td style="text-align:left">0x78</td><td style="text-align:left">390</td><td style="text-align:left">引导程序</td><td style="text-align:left">固定值</td></tr><tr><td style="text-align:left">0x1FE</td><td style="text-align:left">2</td><td style="text-align:left">引导结束标志</td><td style="text-align:left">0x55AA</td></tr></tbody></table>
<p>说明：</p>
<ul>
<li>通过跳转指令和文件系统名称可以定位到文件系统的起始扇区号。</li>
<li>根据<code>0x6C</code>和<code>0x6D</code>可以获得每簇扇区数以及扇区字节数，用于文件数据内容扇区定位。</li>
</ul>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="目标文件数据识别">目标文件数据识别<a href="#目标文件数据识别" class="hash-link" aria-label="目标文件数据识别的直接链接" title="目标文件数据识别的直接链接">​</a></h5>
<p>ExFAT文件系统中每个用户文件至少有三个目录项，这三个目录项被称为三个属性：第一个目录项称为“属性1”，目录项首字节的特征值为<code>“85H”</code>；第二个目录项称为“属性2”，目录项首字节的特征值为<code>“C0H”</code>；第三个目录项称为“属性3”，目录项首字节的特征值为<code>“C1H”</code>。</p>
<p><code>1）“属性1”目录项：</code></p>
<p>用来记录该目录项的附属目录项数、校验和、文件属性、时间戳等信息。其格式定义为：</p>
<table><thead><tr><th style="text-align:left">偏移</th><th style="text-align:left">字段长度(字节)</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">0x00</td><td style="text-align:left">1</td><td style="text-align:left">目录项的类型(特征值为“85H”)</td></tr><tr><td style="text-align:left">0x01</td><td style="text-align:left">1</td><td style="text-align:left">附属目录项数</td></tr><tr><td style="text-align:left">0x02</td><td style="text-align:left">2</td><td style="text-align:left">对所有属性项的Hash校验值</td></tr><tr><td style="text-align:left">0x04</td><td style="text-align:left">2</td><td style="text-align:left">文件属性</td></tr><tr><td style="text-align:left">0x06</td><td style="text-align:left">2</td><td style="text-align:left">保留</td></tr><tr><td style="text-align:left">0x08</td><td style="text-align:left">4</td><td style="text-align:left">文件创建时间</td></tr><tr><td style="text-align:left">0x0C</td><td style="text-align:left">4</td><td style="text-align:left">文件最后修改时间</td></tr><tr><td style="text-align:left">0x10</td><td style="text-align:left">4</td><td style="text-align:left">文件最后访问时间</td></tr><tr><td style="text-align:left">0x14</td><td style="text-align:left">1</td><td style="text-align:left">文件创建时间精确至10ms</td></tr><tr><td style="text-align:left">0x15</td><td style="text-align:left">1</td><td style="text-align:left">文件最后修改时间精确至10ms</td></tr><tr><td style="text-align:left">0x16</td><td style="text-align:left">1</td><td style="text-align:left">创建时间时区差，间隔15分钟</td></tr><tr><td style="text-align:left">0x17</td><td style="text-align:left">1</td><td style="text-align:left">最后修改时间时区差，间隔15分钟</td></tr><tr><td style="text-align:left">0x18</td><td style="text-align:left">1</td><td style="text-align:left">最后访问时间时区差，间隔15分钟</td></tr><tr><td style="text-align:left">0x19</td><td style="text-align:left">7</td><td style="text-align:left">保留</td></tr></tbody></table>
<p>该目录项可以识别目标文件的属性和起始目录项标识。</p>
<p><code>2）“属性2”目录项：</code></p>
<p>用来记录文件是否有碎片、文件名的字符数、文件名的Hash值、文件的起始簇号及大小等信息，格式定义如下：</p>
<table><thead><tr><th style="text-align:left">偏移</th><th style="text-align:left">字段长度(字节)</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">0x00</td><td style="text-align:left">1</td><td style="text-align:left">目录项的类型(特征值为“C0H”)</td></tr><tr><td style="text-align:left">0x01</td><td style="text-align:left">1</td><td style="text-align:left">文件碎片标志。如果是连续存放没有碎片，该标志为“03H”；如果是不连续存放，文件有碎片，该标志就为“01H”</td></tr><tr><td style="text-align:left">0x02</td><td style="text-align:left">1</td><td style="text-align:left">保留</td></tr><tr><td style="text-align:left">0x03</td><td style="text-align:left">1</td><td style="text-align:left">文件名字符数N。用UNICODE码表示，每个字符占用2个字节</td></tr><tr><td style="text-align:left">0x04</td><td style="text-align:left">2</td><td style="text-align:left">文件名Hash校验值。当文件名发生改变时，Hash值也会发生改变。</td></tr><tr><td style="text-align:left">0x06</td><td style="text-align:left">2</td><td style="text-align:left">保留</td></tr><tr><td style="text-align:left">0x08</td><td style="text-align:left">8</td><td style="text-align:left">文件大小1（文件的总字节数）</td></tr><tr><td style="text-align:left">0x10</td><td style="text-align:left">4</td><td style="text-align:left">保留</td></tr><tr><td style="text-align:left">0x14</td><td style="text-align:left">4</td><td style="text-align:left">起始簇号</td></tr><tr><td style="text-align:left">0x18</td><td style="text-align:left">8</td><td style="text-align:left">文件大小2（备份值）。通常情况下与“文件大小1”的数值保持一致</td></tr></tbody></table>
<p>通过属性2可以获取目标文件的大小和文件数据内容存储的起始簇号，通过起始簇号可以计算得到对应的扇区号，以及是否连续的特征。</p>
<p><code>3）“属性3”目录项：</code></p>
<p>用来具体记录文件的名称。如果文件名很长，“属性3”可以包含多个目录项，每个目录项称为一个片段，从上至下依次记录文件名的每一个字符。其格式定义为：</p>
<table><thead><tr><th style="text-align:left">偏移</th><th style="text-align:left">字段长度(字节)</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">0x00</td><td style="text-align:left">1</td><td style="text-align:left">目录项的类型(特征值为“C1H”)</td></tr><tr><td style="text-align:left">0x01</td><td style="text-align:left">1</td><td style="text-align:left">保留</td></tr><tr><td style="text-align:left">0x02</td><td style="text-align:left">2N</td><td style="text-align:left">文件名</td></tr></tbody></table>
<p>通过属性3可以获取文件名称。</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="目标文件数据重定向">目标文件数据重定向<a href="#目标文件数据重定向" class="hash-link" aria-label="目标文件数据重定向的直接链接" title="目标文件数据重定向的直接链接">​</a></h5>
<p>为了能够实现数据重定向，首先需要了解SD扩展接口的特性：</p>
<ul>
<li>底层接口每次传递数据大小为扇区整数倍。</li>
<li>接口调用流程不可改变，否则会导致中断信号异常，上层文件系统运行错误，出现数据损坏的情况。因此在回调实现中，只能修改目标扇区位置以及本次待写入的数据内容。</li>
<li>接口回调时若本次为连续扇区操作，则仅能在首次映射时进行重定向，后续的重定向将不能生效。
<img loading="lazy" src="/assets/images/7-a27a08cbaea7b880bc331fc0a8ed142c.png" width="628" height="335" class="img_ev3q"></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="技术难点">技术难点<a href="#技术难点" class="hash-link" aria-label="技术难点的直接链接" title="技术难点的直接链接">​</a></h4>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sd命令接口扩展写">SD命令接口扩展（写）<a href="#sd命令接口扩展写" class="hash-link" aria-label="SD命令接口扩展（写）的直接链接" title="SD命令接口扩展（写）的直接链接">​</a></h5>
<p>该接口  在底层固件实现，使得在接收到数据存储命令后，落地磁盘扇区前，回调给<code>COS</code>进行业务处理，这是整个方案能力基础。在<code>COS</code>处理完后，再将数据写入指定扇区位置。保证流程不中断，运行稳定。</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="精准快速识别">精准快速识别<a href="#精准快速识别" class="hash-link" aria-label="精准快速识别的直接链接" title="精准快速识别的直接链接">​</a></h5>
<p>由于文件系统数据存储高效率要求，若<code>COS</code>中数据处理耗时，则会直接触发超时，系统提前终止写入。因此对方案高效且精准的数据识别非常高。</p>
<ul>
<li>快速过滤非目标文件数据；在实际运行时，大量的磁盘读写操作与目标文件数据无关，因此需要快速返回，不影响正常使用。</li>
<li>文件头和文件内容区别识别；通常目标文件头需要精准识别，在识别完文件头后，文件内容数据则通过计算的簇链扇区号即可快速判断其合法扇区号。通常文件头格式固定，而文件内容长度则可变且长度大大超过文件头数据，因此仅通过扇区号合法性判断可以加快数据处理，提升效率。</li>
</ul>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="扇区重定向">扇区重定向<a href="#扇区重定向" class="hash-link" aria-label="扇区重定向的直接链接" title="扇区重定向的直接链接">​</a></h5>
<p>重定向需要解决文件头数据不在同一扇区的问题，由于两次的回调给数据的识别和修复带来很大的麻烦。需要将两次扇区，即前一扇区的尾部和后一扇区的头部数据合并识别和修复。</p>
<p><img loading="lazy" src="/assets/images/8-db66dedaa60a394cc82fb00ec373e32d.png" width="500" height="207" class="img_ev3q"></p>
<p>为了使得上层的文件系统运行稳定，而文件头数据通常处于扇区的某个片段位置，因此回调 后需要继续往明区写入数据。为了达到数据保护的目的，需要将原始文件真实数据保存至密区后，还需要对明区的数据进行伪装。</p>
<ul>
<li>伪装为其他文件名或文件夹</li>
<li>伪装为空文件名</li>
<li>伪装为已删除文件</li>
</ul>
<p>为了达到文件头数据格式正确需要对各属性项的数据进行<code>Hash</code>校验，其生成<code>Hash</code>的实现为：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 所有属性目录项的Hash值计算</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">short</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doEntrySetChecksumHash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> octets</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> NumberOfBytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">short</span><span class="token plain"> checksum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> NumberOfBytes</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> index</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> index </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        checksum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">checksum </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">checksum</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">short</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> octets</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> checksum</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toUpper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> ch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token char">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> ch </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> ch </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token char">&#x27;z&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> ch </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ch</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 属性2目录项中对属性3目录项中hash值计算</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">short</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">doNameHash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint8_t</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint8_t</span><span class="token plain"> nameLen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">short</span><span class="token plain"> hash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">nameLen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toUpper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint16_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hash </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hash </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cc </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00ff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        hash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint16_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hash </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hash </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cc </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff00</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> hash</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="文件头复写">文件头复写<a href="#文件头复写" class="hash-link" aria-label="文件头复写的直接链接" title="文件头复写的直接链接">​</a></h5>
<p>通常<code>ExFAT</code>文件系统会对文件头（文件目录属性项）进行多次复写。文件目录或空文件则无第四步骤。</p>
<ul>
<li>首次写入，则保存文件目录项格式（即属性1、属性2、属性3），不包含文件自身属性。</li>
<li>二次写入，则包含文件部分属性，如文件夹或文档，原文件修改时间，文件名。</li>
<li>三次写入，则包含本次文件创建时间，文件内容数据起始簇信息。</li>
<li>四次写入，则包含实际写入的数据大小即文件大小。</li>
</ul>
<p><img loading="lazy" src="/assets/images/9-b764e9dcb20c2dcc33f7b365454ea22c.png" width="617" height="322" class="img_ev3q"></p>
<p>因此在文件头解析过程中，需要对每次回调的数据进行解析和填充，确保加密的文件头数据正确无误。</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="簇链追踪">簇链追踪<a href="#簇链追踪" class="hash-link" aria-label="簇链追踪的直接链接" title="簇链追踪的直接链接">​</a></h5>
<p>文件目录项记录了文件内容数据的起始簇号，数据以对应扇区号（连续或不连续）依次写入 磁盘。</p>
<p><code>FAT</code>表区格式：</p>
<ul>
<li><code>ExFAT</code>的每个<code>FAT</code>项由4字节构成，也就是32位的表项。</li>
<li>每个<code>FAT</code>项都有一个固定的编号，这个编号从0开始，也就是说，第一个<code>FAT</code>项是0号<code>FAT</code>项，第二个FAT项是1号<code>FAT</code>项，以此类推。</li>
<li>每个<code>FAT</code>项占用4字节：其中0号<code>FAT</code>项描述介质类型，其首字节为“F8”，表示介质类型为硬盘；1号<code>FAT</code>项写入4个“FF”；从2号<code>FAT</code>项开始对应2号簇，3号<code>FAT</code>项开始对应3号簇，一直到最后一个簇。目前2、3、4三个<code>FAT</code>项中都是结束标志，簇位图文件、大写字符文件、根目录各占一个簇。</li>
<li>分区的数据区中的每一个簇都会映射到<code>FAT</code>表中的唯一一个<code>FAT</code>项。因为0号<code>FAT</code>项和1号<code>FAT</code>项有特殊的用途，无法与数据区中的簇形成映射，所以数据区中的第一个簇也就编号为2号簇，这也是没有0号簇和1号簇的原因，然后3号簇与3号<code>FAT</code>项映射，4号簇与4号<code>FAT</code>项映射，以此类推。</li>
<li>分区格式化后，分区的两个元文件（簇位图文件和大写字符文件）及用户文件都以簇为单位存放在数据区中，一个文件至少占用一个簇。当一个文件占用多个簇时，这些簇的簇号可能是连续的，也可能是不连续的。如果文件存放的簇不连续，这些簇的簇号就以簇链的形式登记在<code>FAT</code>表中；而如果文件存放在连续的簇中，<code>FAT</code>表则不登记这些连续的簇链。</li>
</ul>
<p>综上，<code>ExFAT</code>文件系统<code>FAT</code>表的功能主要是登记不连续存储的文件的簇链，所以在<code>FAT</code>中可以看到数值为0的<code>FAT</code>项，并不能说明该<code>FAT</code>项对应的簇是可用簇。</p>
<p>1）1.txt文件占0x05、0x07号簇，2.txt占0x06号簇，FAT表如下：
<img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeYAAAB3CAYAAADW3uOdAAABYWlDQ1BJQ0MgUHJvZmlsZQAAKJF1kD9Lw1AUxU+0NqAOVRREHDI4KFaRNohdhFpQBJFSlapbmsZUaOMjiYidnfwA4icQEQcdpG52da5/wMlBzAcQAqIl3peqaRUfXM6Pw73nXS7QFlEYK4YAlAzbzMzPSmvrG5LoIAwR/UhAVlSLJdPpRWrBt7Y+9x4C19o4z7oQX2rOk3l3/iZfjYUd4W9/y+vMa5ZK+kE1pTLTBgSZOL1rM877xH0mLUV8xFlv8BnnXIOrfs9KJkV8SxxRC0qe+Jk4mmvy9SYuFXfUrx34jt2asbpMOkg1hAw05FHCFiTEEMc06RLmQB3/zMn+XArbYNiDSZM6CrBpLkkOQ5ESJSzAgIoJRP3cSZ7N7/37joFXPgESp/TVSOBlb4DLAaC3HHjDGtAzA1wfMMVUfq4ruCFrMx5rcFcF6Dj0vNcsII4C9QfPe694Xv0YaH8Equ4nWt9l1ZqSZr8AAAA4ZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAKgAgAEAAAAAQAAAeagAwAEAAAAAQAAAHcAAAAAqtH85wAAH79JREFUeAHtXX2QFMd97RUQ4egTlwuJMvhDfB3oEEiGYGLpEv6IJZ1kS4mAk4SRUoqkfyInVSnLsSRLCqtYOCRFla0kVXGSKhcupDPCMhJYkf+xgXyUK9gG+WRuJUHsQByDU4Vsg4wRcJP57V7P9vR2z9vd6eVu595VbU3P78173f26Z3q+broUxX+Kf3SADtABOkAH6MC4cOCCcVEKFoIO0AE6QAfoAB2oOsCBmR2BDtABOkAH6MA4cmDyqVOnxlFxWBQ6QAfoAB2gAxPbgclf/vKXJ7YDrD0doAN0gA7QgXHkQIkvf3W+Nfbs2aP6+vo6nxFzoAN0gA7Qga52QMYLPmPu6iZk4ekAHaADdKBoDnBgLlqLsj50gA7QATrQ1Q5wYO7q5mPh6QAdoAN0oGgOdGRgHrznG2pWaWf1N3dRxemZuY1s+8nnz6a2Q3hq44Kv7P/8nsTPRQNHgtdWe91ffiu4tgiWl9X6grRzJ/Iw/fH1t7wVi9QxtTYuf2j/z1YOqQ+P7ivizwdKe9U3R8J/8+fXL+5P+lDIPMy21ft8J9o4q/10/5X8Q7eP5Nspfd2ntG+h+665X+g83lf6tnrmtZEsO1vGTH+kDpKvfTxvWTQm2PuG1CFk33X5I3mEbAfX/iF5wH4qL3+F/Htu3c6od83hRHLfht3RnN7hZF0SZ4YPRtcvSsfMDRBubttOunzd3uiVcyPtUNvi7N69uy2ekE5t35fyT/x9aOuZtvVsorSPtJfkc/P64zace13Kq3VHoqPR3WpH0PKLvtm/pD46v9yFNwTWL90RPVCuRCsH6n3bgNtOSl8PrWkXRjx5v/rPjvR5e1/qlP92nfS67r96PfT+4dr/QvcvfbwbXLcr+uLQOV2VIEvxxzxe2PXJm4n4bR/vZwbcx6W8pr6sh+zLdn/VbZHXF5Nv7yNon5fxIugVs5zh/N3+2Wroq7OSE6Qln+lTT117KDmDkrOrDy4YVj8eOpicwZtnKAgXYfMs5KprdqkbrqlfldtnWaa2xr70/aPq/kn1q/oQZ3dJhQMnXvzaL9SfPDcvUV31aI/64dd+mqznTUj7mO2VV8/m37n5FvXyE9Oq4ZK6Qj284VJ7k1zrov/mUE8uDUSWPvmdj31E/f3qyWjTcYdLn//ks9PVj6Nl6sYLSsHL9/j3lqZ0dzz/m+pPP3t58HyyBH931YwE7ll4iTo0fCJZz5uoDP9S3fTEnERmYPNS9Z4XjiXrIRKvbf+JWvL4HHXbHZepf3nhFyEkMzWmLrwoE28WlL71pXeuSR0/5HhyJLpVPdOhfWXqbUvU9g2n1Bf+8ufNFrOp7eTuxT1LKmpyz2z1rz/ozPFErtDlbpLk8a3B+hjpKmDQI410sEtWLWrI5/Y73qs2vyo7yzQlB9JVjx5SK9eccRqAcKmcHCSP7K0d7OWg+fi+epZPf+KIWjvUrz7ZWzvnkO3nxkWSg7cY8p1otnrqQ99Vv7X3Q6kDSl1h/KfOHHh7/BfSUULp/JsGp6vN+4N2OyW6n4hvAe+J85zaOydu61rfcBSh5ZD0n8+djg8+8cnF2crxlvnNEH711VfVrPgnf5Pik5d/OJce7JrR8G1z9vUTavLVZ6u3y38Sb1RSF6mHh34n2T98vHbicqD+9twr1OMdOAHwlWfxZ+ar46VXlD7MhW7/ngWXqlc+e1Cp1bWD9auff13tefVd1ccNoU505GTm1r2T1IUXzFDveTIe9EdPZH11bjW+fc0ravsoqda/ZrYq4dxe+tbUhe93Yp0MSpscefZknEWY/XzoyX9X73uyduzoRLmjC2oXgqK9aH1zOQS9Ym4uy3xbyY44LTZSPzP5zFemq799dX5VVA4ML3/vpNq46OUE/9gjv1RnXjvRked2+WoysdjSNiviwfOyx+pXH6EckCvxLfFZupypy92ZkM84KwdOqJ9vjQfO+LmQ3Ol5Mx5AQ+rXThZrZZfyV7ZPUZ+6639CWaPkiu/g4FH17vXxyWys/1/D71Nb734jmL4pJCfmV99Rv3o1sU6lT7/4U/XurTdV6yb127b2V0GfocoV2vNrf5YcT1Zvma7+6Lpwdx7k2f/WOVdULxKkH/dfU7+7GMqz2w1/pH89MGlXUI9ClXOsdBbF+8bh+I7SikmdKUFp5Er1T+duUTtauFsYdGDuvf296sS2xts827/2EzV7wSVBam0ehPWB7KHFr1e1J/VcrOYtnpPspILLr1O38YJUCIhE6qR6Yzj9ssaUQLeiQNbBYLnqvGrB4eqdjE7d4tKFDX2rUe7g6H70o+EFau7A4uTWvM4z5PLC22aoa18Pe0dEriL14wQ5Efi93zjakQNz9crvjg4d3Twmy6OeeQvqh7H5cTr07WB9e1b6wRvx3Zg3z10c7G6bHBv1iZ+c/D38lUjt2hbuUZVtm5xovLRhUsMxxd6umfXJ8y9xHu+b4ebZRk42Z119cR6JBq6MK5v3d+YWts5M+pHeD3XMt6z3aN8WLcRlp//jJYdSb5zJQfnxfbODPXMoL20829PPTPQZJ7qiiUrxYHeg9uarnLGGfNOvBbua2lSeKb9TqT8z2/Z05bxflTRVUM9G8qhBrjIORys7cvtU3jcw3xH46j3fVfvmh3mG5qlS0LCU3+yvcqs0ZPnlYLBu6sHEI7ntf/DslcHbQt/GDnV7t1mT5y8sBRlkms1P+leouz7SFi//YHZy4qdPANccPNaxO3yS5988MpI6mWm27vZ2+nhv9l/Rl/9eMPdJm5dnvVb+zr7HII86O/GfEa3UuyOf5JSDsZz5yV/tmU/9TEQORP/43XQRL1+zOHmBoFXc9UzO1rC3kcF47u2124U2li5ZmLW8n+Q062N6FaJ0ZltpPbvNdLzVpRysr49v/8qzTfNPbq2FunKWHVU/X5Y8QpXdLK+kTZ/k1lezZ762jmvdbN9OlN/2KKT/uj5yAv7Ps387WLtqXbS06xZ6fzaPFVKWUPufuW/o5/4P9f5f0pd1TL8rg3xw4dIm8ijP/utk/5W8QvUv0yOzDqH0ff6E7EPmvt1sm8p40ZGB2TSRaaXyDsz0kA7QATpAByaGA/xW9sRoZ9aSDtABOkAHusiBoM+Yu6jeLCodoAN0gA7QgXHpAAfmcdksLBQdoAN0gA5MVAdK8vmviVp51psO0AE6QAfowHhzgC9/nYcW4ctf58FkZkEH6AAdKIADfPmrAI3IKtABOkAH6ECxHOAz5mK1J2tDB+gAHaADXe4AB+Yub0AWnw7QATpAB4rlgHNgli+i6EkiXBM658Xlayha3/ycm7Y2r/5Y83U9mlk+uWKaKpVKDb/5dz2f0J/9wxkJbsaTDTISSB/hGdJVCPERTn3c/lkeIX8RnqUtGOIjHOkjHOkjnPoTu3+h/oHwMes/5oTOkrYn0rYnHs+Li56eaHwkOhrdbU2qnVd/rPm2n7Iub75n/T25fG1qEvvTlY3RDXdurVK+91cfieaNpiWw5d4rUxOfZ+lqLEtftkG41vEtER/hPl0dR3yEax3fEvER7tPVccRHuNbxLREf4T5dHUd8hGuddpdIH+EoX8RHOPX9xy/kjeDIX4SjPBAf4edbv/qfUnamg+t2RV8cOpeEzwwfjFYOHE7W8+KJ0Ghi34bdqYEmr/5Y8+36yXqzA7MMwh8tD6UkJPbQ1jNJzLVNAnoSuuP5uAj3yCZhxEd4IuRJID7CPbJJGPERngh5EoiPcI9sEkZ8hCdCngTiI9wj23QY6SMcZYT4CKd+bWD2HV/oT2v+yHjR1Iz1Zw5kT0PXLi4foN80OD2ebiu7GO3q69sQY83X5fAto9I31E2Tak8VPlpOb7Xk03+ufjbtUlVac6oKzFhSVv+7rze9EVjL0hcqwoE85FPf3770H/Uu3D/Zv9i/snoR6h8Iz9JuZv9tR9/5jBkVJAQuM4esKO0NNoVaiDKNlUYpukW9cm5ExWecDUU4/dJ2Nf1Lv1TxWWf1t/OuQy3PpZulLxkivKFQVgDxEW7JNawiPsIbBK0A4iPckmtYRXyENwhaAcRHuCXXsIr4CG8QbDGA9BGOskN8hFPff/xC3giO/EU4ygPxET4W+g2XqpGK5yoeHlGqtz5mT1lYn982Ly6VlJezPv7IOfXwUH/DvLB59ceajxoxC7/u0/+mvmlt8PUXfqjmfareFgt6JqlHvn4g9q21q2aRdemb2SHc3NaVRnyEuzTNGOIj3NRypREf4S5NM4b4CDe1XGnER7hL04whPsJNrXbSSB/hKE/ERzj1G49fyBMTR/4i3NRypREf4S5NM4b4CDe16kf80eiqR3vUO5UTyTbbnq6oq++YkaznxWVe29VbpqvD0cqGQVkyyas/1vzEqECJnoWTz+tE8IGKTRk6QAfoAB1o1wHXg/n1S3dEM+O3peXXu6b+4pfetl1cXiRbPqqr9WVpvtwkebSrn7d8ofhaRy+zXv564sOXy7fKq7+p6rrUi3fCPxe9FK25/F3JNpequ1JvcOs8fEukj3Cfro4jPsK1jm+J+Aj36eo44iNc6/iWiI9wn66OIz7CtY5vifgI9+k2G0f6CEf5ID7CqZ99/KI/rfsj4wW/ld3uGU0LPH4ruwWzuCkdoAN0YAI7wG9lT+DGZ9XpAB2gA3RgfDrQ8Ix5fBaTpaIDdIAO0AE6MDEc4MA8MdqZtaQDdIAO0IEucYADc5c0FItJB+gAHaADE8MBDswTo51ZSzpAB+gAHegSBzgwd0lDsZh0gA7QATowMRzgwDwx2pm1pAN0gA7QgS5xgANzlzQUi0kH6AAdoAMTwwHnwCzfsp5V2ln9LRo40uBEXry8rKYtefSX3wqun7d88tlQX9mksEi/oUIZATRRN8IzpKsQ4iO86PpSv+9vvF6VSqXqb/5dz6eq7PLnxqdeS22DVrL0hYvwousXvX6ofRE+lv64+r/sK3o/QTgqO+IjvLD69ifTTm3fF83pHU7Cz63bmfpkZl5c9G5ef7yqPxIdje62PsmZVz8vX+aHls+Qio4uZ2JGnED65rY6nfVJTtlGz/eqtz9d2RjdcOdWvQrxZENPgvoeY+Lwr168L4qn0kw22HLvlan+bnvX6pyzSB/hScE8CcRHuEc2CSM+whOhNhNIH+EoW8RHeNH1pX72PsDjU7rVQ/sj44VMJZj6G1y3K/W9Zvm+9cqB+vey8+KpzOIVGQjNb2Xn1c/L1+XzDcxIX/PNZbMDs++grxveh5t5udKIj3CXphlDfISbWq404iPcpaljW+5dnurv9kFHb6eXOi+9jpZIH+FF1y96/VD7Inys/ZH8dZ/3HX8QjuqA+Agvmr6MFw3TPrpuDZw58LYrnMTaxSN1TG0anK42788uRrv6uoB5+VrHt0T6Pp6Oo4m0Ea51fEvER7hPV8cRH+Fax7dEfIT7dH3x069XnNA7r/+1+tYHb1N/cUHJiTcb9OlrPsL1dr4l4iPcp6vjiI9wrdPuEukjHOWL+Agvmj7avxCO/EB8hBdR3/mMGVU0BH62ckitKO1Vlz02J4RcV2ugiboRjiqP+Agvuj6qn8Zfe/FFtfgPfl+vckkHJoQD6PiAcGQS4iO8iPoNl6qROlmb/7e3PmZPWXhRUve8uAjJy1Mff+Sceniov2FO5rz6eflJRT0JpO+hNRVGE2kjHGWC+Agvpv5/N/T3C+f3OKv60gsfULf+xyQn5g8ifYT7lWsI4iN8rPXHOn/kD8KLXv56/dDxAeF1JXcK8RHuVq1HER/hdSV3CvERbqrWR9/R6KpHe9Q7lRPJNtuerqir75iRrOfF5Y3n1Vumq8PRyoZBWTLJq5+Xn1TUk0D6HhrD49SBVY/8mfp1pX7retuGTc6rYn0b+8YWb2MjfYQj2xAf4WOtP9b5I38QXvTyo/oR75ADrgfn65fuiGbGb0vLT95Qtv/axeVFsuWjulpflubLX5JXu/q6nHn48ta4WTZJm2+pN1M+XQ69zHr5C03EjnCdh2+J+Aj36eo44iNc6/iWiI9wn64ZNzXmGW/Dm9vIiy92PzXxrDTSR3iWtmCIj/Cx1h/r/JE/CC9y+c26T1XXpV6UlHojvBVvqF9zS8aLkiQ7NOZTdtQBmfi6r6+PftABOkAH6AAdyHRAxouGW9mZDIJ0gA7QATpAB+hARx3gwNxReylOB+gAHaADdKA1Bzgwt+YXt6YDdIAO0AE60FEHODB31F6K0wE6QAfoAB1ozQEOzK35xa3pAB2gA3SADnTUAQ7MHbWX4nSADtABOkAHWnOAA3NrfnFrOkAH6AAdoAMddYADc0ftpTgdoAN0gA7QgdYccA7M8i3rWaWd1d+igSMNinnx8rKatuTRX34ruP5Yl6+hQiCAJkpHOJBXiI9w6l+vZHJ4c4J45ImJI38Rbmq50oiPcJemGUN8hJta7aSRPsJRnoiPcOpz/8g6PrTVf+xPpsk8xOYnKOUTleanCPPionfz+uPVbEeio9Hd1ic58+rn5ectn+2nrGd9khNNxI5wV35mDPERbmq50oiPcJemGUN8hJtarjTiI9ylacYQH+GmliuN+Ah3aZoxxEe4qdVOGukjHOWJ+Ain/n3RjCXlxIYt916ZGi8SwJNA/iLcI5uEER/hiZAngfgId8nKeKFsYHDdrtT3UOX71isH6t/Lzovb+e3bsDvVkHn18/Lzls/my3rWwIwmSke4Kz8zhvgIN7VcacRHuEvTjCE+wk0tVxrxEe7SNGOIj3BTy5VGfIS7NM0Y4iPc1GonjfQRjvJEfIRTf3lqvDhd2Rjd4PnevMsr5C/CXZpmDPERbmq50oiPcJemjBcN0z66bsucOfC2K5zE2sUjdUxtGpyuNu/PLka7+rqA7fJDlU+Xo9klmogd4SgfxEc49euzUSEvXDjyF+EuTTOG+Ag3tVxpxEe4S7OVGNJHOMoL8RFOfe4fWX2gmf7jfMacJRoKO1s5pFaU9qrLHpsTSjKozngvX9DKUowO0AE6QAfGjQMNA3OkTtYmjjeKOGXhRclaXlyE5OWsqxYcVmuH+tUzq9NXy3n18/Lzli8xqunE6ETsxvYXzu8x1hBubOpMIj7CnaJGEPERbkg5k4iPcKeoEUR8hBtSziTiI9wpagQRH+GGlDOJ+Ah3irYQRPoIR1khPsKp/8bwSMqE9PErBTlWkL8Id0imQoiP8JSYYwXxEe6QlJB9j1ueKT9Yrr2cJZj98ldeXPTMl8vOd/6o/HnLZ9dH1rOeMcszmfvLQwnNfnkC4QnRk0B8hHtkkzDiIzwR8iQQH+Ee2SSM+AhPhDwJxEe4RzYJIz7CEyFPAvER7pFtOoz0EY4yQnyEUz/7+EV/WvfH+fKXGLl+6Y5oZvy2tPx619Rf/NImt4vLoLh8VFfry9J867uT+aPyhyqfzkcvswZm2cacbHye48UJhOt8fEvER7hPV8cRH+Fax7dEfIT7dHUc8RGudXxLxEe4T1fHER/hWse3RHyE+3SbjSN9hKN8EB/h1L88kms8+bmOX/SnNX9kvCiJaXLlzL/OOSATX/f19XUuAyrTATpAB+hAIRyQ8aLhGXMhasZK0AE6QAfoAB3oUgc4MHdpw7HYdIAO0AE6UEwHODAXs11ZKzpAB+gAHehSBzgwd2nDsdh0gA7QATpQTAc4MBezXVkrOkAH6AAd6FIHODB3acOx2HSADtABOlBMBzgwF7NdWSs6QAfoAB3oUgc4MHdpw7HYdIAO0AE6UEwHnAOzfMt6Vmln9bdo4EhDzfPi5WU1bcmjv/xWcP285TP5cxc1zpRi4i5/GioEAmgibYQDeYX4CKc+J4IPPhE86lQGjvonwg0pZxLxEe4UNYKIj3BDyplEfIQ7RY0g4iPckHImER/hTlEjiPgIN6ScScRHuFPU/lzaqe37Ut+ytr+VnRcXvZvX177FPRIdje62PsmZVz8v3/5WtswXrcsrXiF9209Zz/okJ5pIG+Gu/MwY4iPc1HKlER/hLk0zhvgIN7VcacRHuEvTjCE+wk0tVxrxEe7SNGOIj3BTq5000kc4yhPxEU79+6IZS8qJDfa3/hPAk0D+Itwjm4QRH+GJkCeB+Ah3yTq/lT24bldq4mv5fvTKgfr3svPidkFk4DO/lZ1XPy/fVT5zYEb6Nl/WswZmNJE2wl35mTHER7ip5UojPsJdmmYM8RFuarnSiI9wl6YZQ3yEm1quNOIj3KVpxhAf4aZWO2mkj3CUJ+IjnPrLU+OFTPpxg+N7/z6fkL8I9+nqOOIjXOv4loiPcJeujBfpORed19RKnTnwtgephdvFI3VMbRqcrjbvzy5Gu/q60K3ypVyfiOeK3hMLTO2do94cmqalnEuk7yRlBNFE2gjPkK5CiI9w6jc+3kCemDjyF+GmliuN+Ah3aZoxxEe4qdVOGukjHOWJ+AinPvePrD7QTP9xPmPOEg2Fna0cUiviwe+yx+aEkgymU1JXqC3RrepI/Hvq2kPO5+DBMqMQHaADdIAO0AHDgYaBOVInlT3x9ZSFFyWUvLgIyctTVy04rNYO9atnVqevlvPq5+UnFR1NDGxeqt7zwrEkjPSTDZtOoIm0EY4yQnyEU9/eHzgRfI/RKfL2H0PKmUT6CHeKGkHER7gh5UwiPsKdokYQ8RFuSDmTiI9wp6gRRHyEG1LOJOIj3ClqBBEf4YaUmbTvccsz5QfLtZezBLNf/sqL2y9Xne/8UfllrmnzmbeU15yTGvHt+sh61jNmNBE7wl35mTHER7ip5UojPsJdmmYM8RFuarnSiI9wl6YZQ3yEm1quNOIj3KVpxhAf4aZWO2mkj3CUJ+IjnPobo/vLQ4kNrb78hfxFeJKxJ4H4CPfIJmHER3giZCScL38JLoPTzPhtafmZg5LmtovLoLZ8VFfry9IcCDuZfzPl12+K6/LN6R3WtGSJ6p9sOJrIGphlEzQRO8Lt/Ox1xEe4rWevIz7CbT17HfERbuvZ64iPcFvPXkd8hNt69jriI9zWs9cRH+G2XqvrSB/hKD/ERzj1L4/ii73qb14LL35p35C/CNc6viXiI9ynq+OIj3Cto5cyXpRkxbyCZjq8AzLxdV9fX3hhKtIBOkAH6EChHJDxouEZc6FqyMrQATpAB+gAHegyBzgwd1mDsbh0gA7QATpQbAc4MBe7fVk7OkAH6AAd6DIHODB3WYOxuHSADtABOlBsBzgwF7t9WTs6QAfoAB3oMgc4MHdZg7G4dIAO0AE6UGwHODAXu31ZOzpAB+gAHegyBzgwd1mDsbh0gA7QATpQbAecA7N8y3pWaWf1t2jgSIMDefHyspq25NFffiu4ft7ySYFkhqm1cfnaqX9DhUAATaSNcCCvEB/h1L9elUql6m/+Xc8jOxpw5C/CGwStAOIj3JJrWEV8hDcIthhA+ghH2SE+wqnP/SPr+NBW/9GfAdPLU9v3ReZnKO1vZefFRU/Pb6w/f2l+kjOvfl6+9kE+u/lAuZKai1owpK/55jLrk5xoIm2Em/m40oiPcJemGUN8hJtarjTiI9ylacYQH+GmliuN+Ah3aZoxxEe4qeVKIz7CXZqtxJA+wlFeiI9w6t8XzVhSTmxo9VvZyF+EJxl7EoiPcI9sEkZ8hCdCRsL5rezBdbtSE1/L961XDhxOaHnxRGg0sW/D7tS3svPq5+VLsfTJg113wZC+bGP/ZQ3MaCJthNt52euIj3Bbz15HfITbevY64iPc1rPXER/htp69jvgIt/XsdcRHuK1nryM+wm29VteRPsJRfoiPcOovT40XMmnDDS18Lxv5i/Ai+i/jRXrORc89mTMH3vYgtXC7uNwu3jQ4XW3en12MdvV1oVvhy23wz52+Rg09MU2drRzXEplLpJ9JdoBoIm2EOyRTIcRHeErMsYL4CHdIpkKIj/CUmGMF8RHukEyFEB/hKTHHCuIj3CGZCiE+wlNibawgfYSjLBEf4dSvIAsyceQvwjPFYxDxEX4+9LNHRFSCHPjZyiF1/YJhtWzrTTlUwlMrB06on299Vc2Kf/qvf+HF6uV4oOYfHaADdIAO0IFOO9Dw8lekTip7YvgpCy9KypEXFyG5Kr1qwWG1dqhfPbM6fW6QVz8v/87Nt6gj0a3V34+GF6i5A4tTgzLST4xqOoEm0kY4ygjxEU59e3+4cH4PMsXAkb8IN6ScScRHuFPUCCI+wg2ptpJIH+EoU8RHOPW5f4ykOkH6+NBm/7Hv0ctz1QfLx5Ow/fJXXlz0zJfLkoxGE3n18/LN8oiW+XxdMKRv8nU66xkzmkgb4ToP3xLxEe7T1XHER7jW8S0RH+E+XR1HfIRrHd8S8RHu09VxxEe41vEtER/hPt1m40gf4SgfxEc49TdG95eHEhtaffkL+YvwJGNPAvER7pFNwoiP8ETISDhf/hJc3kieqWq/3jX1F780t11cBrXlo7paX5bmW9mdzL/Z8st2cgKhy6jfIm+Fr7eVZdbALDiaSBvhopH1h/gIz9IWDPERTv2JPdE8239itz86PiC8aP1HxouSVCp1Hc6V4A7IxNd9fX3BdSlIB+gAHaADxXJAxouGZ8zFqiJrQwfoAB2gA3SguxzgwNxd7cXS0gE6QAfoQMEd4MBc8AZm9egAHaADdKC7HODA3F3txdLSATpAB+hAwR3gwFzwBmb16AAdoAN0oLsc4FvZ3dVeLC0doAN0gA4U3AFeMRe8gVk9OkAH6AAd6C4HODB3V3uxtHSADtABOlBwBzgwF7yBWT06QAfoAB3oLgc4MHdXe7G0dIAO0AE6UHAHODAXvIFZPTpAB+gAHeguBzgwd1d7sbR0gA7QATpQcAc4MBe8gVk9OkAH6AAd6C4HODB3V3uxtHSADtABOlBwBzgwF7yBWT06QAfoAB3oLgc4MHdXe7G0dIAO0AE6UHAH/h8Yp6Wnlg978AAAAABJRU5ErkJggg==" width="486" height="119" class="img_ev3q"></p>
<p>2）1.txt文件占0x05、0x07号簇，2.txt占0x06、0x0B、0x0C号簇，3.txt文件占0x08、0x0A号簇，4.txt占0x09号簇，FAT表如下：
<img loading="lazy" src="data:image/png;base64,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" width="485" height="113" class="img_ev3q"></p>
<p>因此，在识别文件内容数据时，需要从起始簇开始，对照<code>FAT</code>记录的非连续簇关系，动态生成判断扇区号是否为目标文件数据的合法性条件。</p></div></div><div style="width:100%;height:40px"></div><div class="grid grid-cols-2 gap-4 2xl:gap-8 w-full"><a class="group flex-1 p-4 2xl:p-6 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 hover:dark:bg-gray-700 hover:no-underline" href="/blog/Binder"><div class="flex-1 flex items-start justify-center flex-col gap-2 2xl:gap-4 text-left"><div class="flex items-center gap-2 text-xs leading-3 content-md:text-sm content-md:leading-6 text-gray-500 dark:text-gray-300 text-xs content-md:text-sm content-4xl:text-lg"><span class="bg-gray-100 dark:bg-gray-800 dark:bg-opacity-50 group-hover:bg-gray-50 dark:group-hover:bg-gray-800 dark:group-hover:bg-opacity-100 flex items-center justify-center rounded w-6 h-6"><svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-gray-400 dark:text-gray-500"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.70711 0.292893C4.31658 -0.0976311 3.68342 -0.097631 3.29289 0.292893L0.292893 3.29289C-0.0976314 3.68342 -0.0976314 4.31658 0.292893 4.70711L3.29289 7.70711C3.68342 8.09763 4.31658 8.09763 4.70711 7.70711C5.09763 7.31658 5.09763 6.68342 4.70711 6.29289L3.41421 5L11 5C11.5523 5 12 4.55228 12 4C12 3.44772 11.5523 3 11 3L3.41421 3L4.70711 1.70711C5.09763 1.31658 5.09763 0.683417 4.70711 0.292893Z" fill="currentColor"></path></svg></span>上一页</div><span class="text-xs content-md:text-base content-4xl:text-xl text-refine-link-light dark:text-refine-link-dark underline ml-8">深入Binder拦截</span></div></a></div></article></div><div class="w-[280px] hidden blog-md:block flex-shrink-0"><div class="hidden blog-md:block w-full sticky right-0 top-[67px] max-w-[280px] overflow-auto h-[calc(100vh-67px)] scrollbar-hidden px-3 blog-md:py-16 border-l dark:border-l-gray-700 border-l-gray-100"><div class="flex flex-wrap gap-2 pb-6 pl-1"><a class="text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded py-1 px-2 no-underline hover:no-underline whitespace-nowrap" href="/blog/tags/cos">COS</a><a class="text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded py-1 px-2 no-underline hover:no-underline whitespace-nowrap" href="/blog/tags/tf-card">TF-Card</a></div><ul class="list-none m-0 p-0"><li><a href="#说明" class="refine-toc-item pl-7 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">说明</a></li><li><a href="#关键词" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">关键词</a></li><li><a href="#背景" class="refine-toc-item pl-7 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">背景</a></li><li><a href="#技术方案" class="refine-toc-item pl-7 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">技术方案</a></li><li><a href="#设计" class="refine-toc-item pl-11 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">设计</a></li><li><a href="#硬件" class="refine-toc-item pl-11 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">硬件</a></li><li><a href="#数据流" class="refine-toc-item pl-11 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">数据流</a></li><li><a href="#数据存储" class="refine-toc-item pl-11 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">数据存储</a></li><li><a href="#解析和识别" class="refine-toc-item pl-11 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">解析和识别</a></li><li><a href="#sd命令接口扩展" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">SD命令接口扩展</a></li><li><a href="#exfat文件系统头识别" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">ExFAT文件系统头识别</a></li><li><a href="#目标文件数据识别" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">目标文件数据识别</a></li><li><a href="#目标文件数据重定向" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">目标文件数据重定向</a></li><li><a href="#技术难点" class="refine-toc-item pl-11 py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">技术难点</a></li><li><a href="#sd命令接口扩展写" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">SD命令接口扩展（写）</a></li><li><a href="#精准快速识别" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">精准快速识别</a></li><li><a href="#扇区重定向" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">扇区重定向</a></li><li><a href="#文件头复写" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">文件头复写</a></li><li><a href="#簇链追踪" class="refine-toc-item py-2 pr-3 dark:text-gray-500 hover:text-gray-900 text-gray-500 rounded-lg transition-colors duration-200 ease-in-out block text-sm leading-6 no-underline hover:no-underline">簇链追踪</a></li></ul></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">iofomo</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://book.douban.com/review/5045014/" target="_blank" rel="noopener noreferrer" class="footer__link-item">One leaf, one bodhi, one flower, one world.</a></li></ul></div><div class="col footer__col"><div class="footer__title">知识社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.csdn.net/chendianbo?type=blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">CSDN</a></li><li class="footer__item"><a href="https://blog.51cto.com/u_16282197" target="_blank" rel="noopener noreferrer" class="footer__link-item">51CTO</a></li><li class="footer__item"><a href="https://www.zhihu.com/people/pang-bo-zi-75" target="_blank" rel="noopener noreferrer" class="footer__link-item">知乎</a></li></ul></div><div class="col footer__col"><div class="footer__title">技术社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://bbs.kanxue.com/user-home-909890.htm" target="_blank" rel="noopener noreferrer" class="footer__link-item">看雪</a></li><li class="footer__item"><a href="https://juejin.cn/user/3424295591361992/posts" target="_blank" rel="noopener noreferrer" class="footer__link-item">掘金</a></li><li class="footer__item"><a href="https://www.jianshu.com/u/aaf9e93735b9" target="_blank" rel="noopener noreferrer" class="footer__link-item">简书</a></li></ul></div><div class="col footer__col"><div class="footer__title">开源社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.gitee.com/iofomo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee</a></li><li class="footer__item"><a href="https://www.github.com/iofomo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://www.docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about/Introduce">关于我们</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about/privacy">隐私协议</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 iofomo Inc. Built with Docusaurus.<a style="text-decoration:none" href="http://beian.miit.gov.cn"><p style="color:darkgray">湘ICP备2023024246号-1</p></a></div></div></div></footer></div>
</body>
</html>